<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <link rel="icon" href="favicon.ico" />

    <link href="../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <link href="../stylesheets/navio.css" rel="stylesheet" type="text/css" media="all" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="includes includes_interface">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="../images/logo.png" alt="Logo" />
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="interface">Interface</h1>

<p>The base URL for <strong>navitia.io</strong> is :
<a href="https://api.navitia.io/v1/">https://api.navitia.io/v1/</a></p>

<p>We aim to implement <a href="http://en.wikipedia.org/wiki/HATEOAS">HATEOAS</a>
concept with Navitia.</p>

<p>Every resource returns a response containing a links object, a paging
object, and the requested objects, following hypermedia principles.
That&rsquo;s lots of links. Links allow you to know all accessible uris and services for a given point.</p>

<h2 id="paging">Paging</h2>

<aside class="success">
    The results are paginated to avoid crashing your parser. The parameters to get the next or previous page are within the &ldquo;links&rdquo; section of the result.
</aside>

<p>Every Navitia response contains a paging object</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>items_per_page</td>
<td>int</td>
<td>Number of items per page</td>
</tr>
<tr>
<td>items_on_page</td>
<td>int</td>
<td>Number of items on this page</td>
</tr>
<tr>
<td>start_page</td>
<td>int</td>
<td>The page number</td>
</tr>
<tr>
<td>total_result</td>
<td>int</td>
<td>Total number of items for this request</td>
</tr>
</tbody></table>

<p>You can navigate through a response using 2 parameters</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_page</td>
<td>int</td>
<td>The page number</td>
</tr>
<tr>
<td>count</td>
<td>int</td>
<td>Number of items per page</td>
</tr>
</tbody></table>

<aside class="notice">
    The number of objects returned for a request can <b>not be superior than 1000</b>.
    If you request for more, Navitia will return the first 1000, and you will have to paginate to get next 1000.
</aside>

<h2 id="templated-url">Templated URL</h2>

<blockquote>
<p>From every object collection</p>
</blockquote>
<pre class="highlight shell"><code><span class="c">#first request</span>

<span class="gp">$ </span>curl <span class="s1">'https://api.navitia.io/v1/coverage/sandbox/lines'</span> -H <span class="s1">'Authorization: 3b036afe-0110-4202-b9ed-99718476c2e0'</span>

<span class="c">#response</span>
HTTP/1.1 200 OK

<span class="c">#first line is like:</span>

<span class="o">{</span>
    <span class="s2">"lines"</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">"id"</span>: <span class="s2">"line:RAT:M1"</span>,
            <span class="s2">"code"</span>: <span class="s2">"1"</span>,
            <span class="s2">"name"</span>: <span class="s2">"Château de Vincennes - La Défense"</span>,
            <span class="s2">"..."</span>: <span class="s2">"..."</span>
        <span class="o">}</span>,
        <span class="o">{</span>...<span class="o">}</span>
        <span class="o">]</span>,
    ...,

<span class="c">#and a templated link from the example above:</span>

    <span class="s2">"links"</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">"href"</span>: <span class="s2">"https://api.navitia.io/v1/coverage/sandbox/lines/{lines.id}/stop_schedules"</span>,
            <span class="s2">"rel"</span>: <span class="s2">"stop_schedules"</span>,
            <span class="s2">"templated"</span>: <span class="nb">true</span>
        <span class="o">}</span>,
        <span class="o">{</span>...<span class="o">}</span>
    <span class="o">]</span>
<span class="o">}</span>

<span class="c">#you can then request for "stop_schedules" service using templating</span>
<span class="c">#be careful, without any filter, the response can be huge</span>

<span class="c">#second request</span>
<span class="c">#{line.id} has to be replaced by "line:RAT:M1"</span>
<span class="gp">$ </span>curl <span class="s1">'https://api.navitia.io/v1/coverage/sandbox/lines/line:RAT:M1/stop_schedules'</span> -H <span class="s1">'Authorization: 3b036afe-0110-4202-b9ed-99718476c2e0'</span>

<span class="c">#here is a smarter request for a line AND a stop_area</span>
<span class="gp">$ </span>curl <span class="s1">'https://api.navitia.io/v1/coverage/sandbox/lines/line:RAT:M1/stop_areas/stop_area:RAT:SA:PLROY/stop_schedules'</span> -H <span class="s1">'Authorization: 3b036afe-0110-4202-b9ed-99718476c2e0'</span>

</code></pre>

<p>Under some link sections, you will find a &ldquo;templated&rdquo; property.</p>

<p>If &ldquo;templated&rdquo; is true, then you will have to format the link with your right id as describe in the example.
In order to do that, you will have to</p>

<ul>
<li>take the id from the object you want to get the linked service</li>
<li>replace {lines.id} in the url as the example</li>
</ul>

<h2 id="inner-references">Inner references</h2>
<pre class="highlight shell"><code><span class="c">#You may find "disruptions" link, as</span>

<span class="o">{</span>
    <span class="s2">"internal"</span>: <span class="nb">true</span>,
    <span class="s2">"type"</span>: <span class="s2">"disruption"</span>,
    <span class="s2">"id"</span>: <span class="s2">"edc46f3a-ad3d-11e4-a5e1-005056a44da2"</span>,
    <span class="s2">"rel"</span>: <span class="s2">"disruptions"</span>,
    <span class="s2">"templated"</span>: <span class="nb">false</span>
<span class="o">}</span>
</code></pre>

<p>Some link sections holds disruption links. These links are templated.</p>

<p>That means :</p>

<ul>
<li>inside the self stream ( <strong>&ldquo;internal&rdquo;: true</strong> )</li>
<li>you will find a <strong>disruptions</strong> section ( <strong>&ldquo;rel&rdquo;: &ldquo;disruptions&rdquo;</strong> )</li>
<li>containing some <a href="#disruption">disruptions</a> objects ( <strong>&ldquo;type&rdquo;: &ldquo;disruption&rdquo;</strong> )</li>
<li>where you can find the details of your object ( <strong>&ldquo;id&rdquo;: &ldquo;edc46f3a-ad3d-11e4-a5e1-005056a44da2&rdquo;</strong> ).</li>
</ul>

<h2 id="objects-order">Objects order</h2>

<p>Unless specified, objects lists are not sorted and stability of objects&rsquo; order is not guaranteed.<br>
This is also true for the ordering of the attributes of objects.</p>

<p>Examples of sorted objects tables:</p>

<ul>
<li>journeys in a <code class="prettyprint">/journeys</code> response</li>
<li><code class="prettyprint">/departures</code> and <code class="prettyprint">/arrivals</code></li>
<li><code class="prettyprint">/stop_schedules</code></li>
<li>stop_points in <code class="prettyprint">/routes/{route_id}?depth=3</code></li>
<li><code class="prettyprint">/places_nearby</code></li>
<li><code class="prettyprint">/places</code></li>
</ul>

<p>Examples of unsorted responses:</p>

<ul>
<li>stop_points in <code class="prettyprint">/lines/{line_id}/stop_points</code></li>
<li>pretty much everything else&hellip;</li>
</ul>

<h2 id="objects-attributes">Objects attributes</h2>

<p>Like almost any API, objects are subject to adaptations.<br>
Please be warned that we allow Navitia to add new attributes to objects, and it will never be considered a breaking change.</p>

<p>We also allow Navitia to add values to enum, so be prepared to that. For example <a href="#section">section&rsquo;s</a> type of journeys are regularly evolving.</p>

<h2 id="lifetime-of-id">Lifetime of id</h2>

<p>The way id (or uri) of an object is generated is not garanteed stable, nor are the data processed.
So we advise to limit to the minimum storing ids/uris of objects.
We recommend to use as much as possible a previous call to <strong><a href="#places">Places</a></strong> and <strong><a href="#pt-objects">PT_objects</a></strong>.
Also, be resilient if one of those ids/uris disappears.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
